!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}e((function(){document.querySelectorAll(".modal").forEach((e=>document.body.appendChild(e)))}));function t(e,t){t.innerHTML="Loading...",fetch(e).then((e=>e.text())).then((e=>{t.innerHTML=e}))}e((function(){document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("shown.bs.modal",(function(e){const o=e.target.querySelector("form").action;if((e=>e===window.location.href)(o))return;const n=e.target.querySelector(".modal-body");void 0!==o&&void 0!==n&&t(o,n)}))})),document.querySelectorAll(".modal-button").forEach((e=>{e.addEventListener("click",(function(e){const o=e.target.dataset.action,n=document.querySelector(e.target.dataset.bsTarget),r=n.querySelector("form");if(void 0===o)return;r.action=o;t(o,n.querySelector(".modal-body"))}))}))})),e((function(){document.querySelectorAll(".modal form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const o=t.target.action,n=new FormData(e),r=t.target.querySelector(".modal-body");var d;void 0!==o&&void 0!==n&&void 0!==r&&(d=r,fetch(o,{method:"post",body:n}).then((e=>e.json())).then((e=>{e.valid?window.location.reload():d.innerHTML=e.html})).catch((e=>{d.innerHTML="Error"})))}))}))}))}));
